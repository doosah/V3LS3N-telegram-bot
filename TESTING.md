# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ Railway

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Deployments" –∏–ª–∏ "Logs"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: `üöÄ Telegram Bot Scheduler –∑–∞–ø—É—â–µ–Ω`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: `‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000`
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Health Check

1. –í Railway –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Settings" ‚Üí "Networking"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-service.railway.app`)
4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://your-service.railway.app/health`
5. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{
  "status": "ok",
  "date": "01.01.2025",
  "time": "12:00:00"
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

1. Settings ‚Üí Variables
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
   - `TELEGRAM_BOT_TOKEN` = `8241855422:AAG7yW4NT5yoOagAo7My6bXDCdOo-pAhUa8`
   - `TELEGRAM_CHAT_ID` = `-1003107822060`
   - `SUPABASE_URL` = `https://hpjrjpxctmlttdwqrpvc.supabase.co`
   - `SUPABASE_KEY` = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwanJqcHhjdG1sdHRkd3FycHZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwNzAxMzIsImV4cCI6MjA3NzY0NjEzMn0.jgJD4uKiLoW6MPw5yMrsoYlguowcnn5tl9pKeib7tcs`

### 4. –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –≤ `server/index.js`:

```javascript
// –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, –ø–æ—Å–ª–µ –≤—Å–µ—Ö cron –∑–∞–¥–∞—á, –¥–æ–±–∞–≤—å—Ç–µ:
// –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)
async function testSend() {
    console.log('üß™ –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è...');
    const testMessage = `üß™ <b>–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</b>\n\n` +
                       `–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç!\n` +
                       `üìÖ –î–∞—Ç–∞: ${getCurrentDate()}\n` +
                       `‚è∞ –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU', { timeZone: 'Europe/Moscow' })}`;
    
    await sendTelegramMessage(testMessage);
}

// –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∞ (–∑–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç–µ):
// testSend();
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:
- **07:45 –ú–°–ö** - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–π —Å–º–µ–Ω—ã
- **08:00 –ú–°–ö** - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –¥–Ω–µ–≤–Ω–æ–π —Å–º–µ–Ω—ã
- **21:45 –ú–°–ö** - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–æ—á–Ω–æ–π —Å–º–µ–Ω—ã
- **22:00 –ú–°–ö** - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –Ω–æ—á–Ω–æ–π —Å–º–µ–Ω—ã

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã cron

–í –ª–æ–≥–∞—Ö Railway –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
- `‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–π —Å–º–µ–Ω—ã (07:45)` - –≤ 07:45 –ú–°–ö
- `‚è∞ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –¥–Ω–µ–≤–Ω–æ–π —Å–º–µ–Ω—ã (08:00)` - –≤ 08:00 –ú–°–ö
- `‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–æ—á–Ω–æ–π —Å–º–µ–Ω—ã (21:45)` - –≤ 21:45 –ú–°–ö
- `‚è∞ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –Ω–æ—á–Ω–æ–π —Å–º–µ–Ω—ã (22:00)` - –≤ 22:00 –ú–°–ö

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram —á–∞—Ç —Å ID `-1003107822060`
2. –í —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å —Ç–µ–≥–∞–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
   - –ò—Ç–æ–≥–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `package.json` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `server`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–∞–ø–∫—É (Root Directory: `server`)

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_CHAT_ID` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `-1003107822060`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ Supabase

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `SUPABASE_URL` –∏ `SUPABASE_KEY`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã `operational_reports` –∏ `personnel_reports` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—è: `report_date`, `warehouse`, `shift_type`, `data`)

## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –≤ cron –Ω–∞ –±–ª–∏–∂–∞–π—à—É—é –º–∏–Ω—É—Ç—É:

```javascript
// –í—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è + 1 –º–∏–Ω—É—Ç–∞)
cron.schedule('* * * * *', async () => {
    // –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –¥–ª—è —Ç–µ—Å—Ç–∞
    console.log('üß™ –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞...');
    await testSend();
}, {
    timezone: 'Europe/Moscow'
});
```

**–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –≤–µ—Ä–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ!

